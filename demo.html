<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index of /shared/assets/</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css">
    <script>
        if (localStorage.getItem('fancyindex-theme') === 'dark' ||
            (localStorage.getItem('fancyindex-theme') === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches) ||
            (!localStorage.getItem('fancyindex-theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }
    </script>
</head>

<body>
    <div class="fancyui-container">
        <nav class="fancyui-nav">
            <div class="fancyui-nav-left">
                <div class="fancyui-node-label">
                    <i data-lucide="database"></i>
                    <span>File Server</span>
                </div>
                <div class="fancyui-breadcrumb" id="fancyui-breadcrumb">
                    <a href="/">root</a>
                </div>
            </div>
            <div class="fancyui-nav-right">
                <div class="fancyui-search">
                    <i data-lucide="search" class="fancyui-search-icon"></i>
                    <input type="text" id="fancyui-search" class="fancyui-search-input"
                        placeholder="Filter files... (/, Ctrl+K)" autocomplete="off">
                </div>
                <button class="fancyui-theme-toggle" id="fancyui-theme-toggle" title="Toggle theme (t)">
                    <i data-lucide="sun" class="icon-sun"></i>
                    <i data-lucide="moon" class="icon-moon"></i>
                </button>
            </div>
        </nav>

        <div class="fancyui-sort-bar">
            <span class="fancyui-sort-label">Sort by:</span>
            <button class="fancyui-sort-btn active" data-sort="name"><i data-lucide="arrow-up-down"></i> Name</button>
            <button class="fancyui-sort-btn" data-sort="date"><i data-lucide="calendar"></i> Date</button>
            <button class="fancyui-sort-btn" data-sort="size"><i data-lucide="hard-drive"></i> Size</button>
        </div>

        <div class="fancyui-card">
            <div class="fancyui-card-scroll">
                <h1>/shared/assets/</h1>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Date</th>
                            <th>Size</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><a href="../">Parent Directory</a></td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><a href="builds/">builds/</a></td>
                            <td>2024-10-25</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><a href="docs/">docs/</a></td>
                            <td>2024-10-24</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><a href="images/">images/</a></td>
                            <td>2024-10-23</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><a href="Manual.pdf">Manual.pdf</a></td>
                            <td>2024-10-22</td>
                            <td>1.2 MB</td>
                        </tr>
                        <tr>
                            <td><a href="photo.png">photo.png</a></td>
                            <td>2024-10-21</td>
                            <td>4.8 MB</td>
                        </tr>
                        <tr>
                            <td><a href="video.mp4">video.mp4</a></td>
                            <td>2024-10-20</td>
                            <td>156 MB</td>
                        </tr>
                        <tr>
                            <td><a href="song.mp3">song.mp3</a></td>
                            <td>2024-10-19</td>
                            <td>8.4 MB</td>
                        </tr>
                        <tr>
                            <td><a href="backup.zip">backup.zip</a></td>
                            <td>2024-10-18</td>
                            <td>24 MB</td>
                        </tr>
                        <tr>
                            <td><a href="app.js">app.js</a></td>
                            <td>2024-10-17</td>
                            <td>18 KB</td>
                        </tr>
                        <tr>
                            <td><a href="style.css">style.css</a></td>
                            <td>2024-10-16</td>
                            <td>8 KB</td>
                        </tr>
                        <tr>
                            <td><a href="config.json">config.json</a></td>
                            <td>2024-10-15</td>
                            <td>1.2 KB</td>
                        </tr>
                        <tr>
                            <td><a href="README.md">README.md</a></td>
                            <td>2024-10-14</td>
                            <td>3.4 KB</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="fancyui-card-footer">
                <div class="fancyui-card-footer-left">
                    <span><i data-lucide="cpu"></i> Powered by Nginx</span>
                    <span class="fancyui-footer-dot"></span>
                    <span>FancyIndex Theme</span>
                </div>
                <div class="fancyui-card-footer-right" id="fancyui-timestamp"></div>
            </div>
        </div>
        <div class="fancyui-pagination" id="fancyui-pagination"></div>
    </div>

    <script>
        // Inline the footer.html JS here for demo
        (function () {
            'use strict';
            const ITEMS_PER_PAGE = 100;
            const THEME_STORAGE_KEY = 'fancyindex-theme';
            const SORT_STORAGE_KEY = 'fancyindex-sort';
            const SORT_DIR_STORAGE_KEY = 'fancyindex-sort-dir';

            if (typeof lucide !== 'undefined') lucide.createIcons();

            // Theme
            const themeToggle = document.getElementById('fancyui-theme-toggle');
            const themeOptions = ['auto', 'light', 'dark'];
            let currentThemeIndex = 0;
            const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');

            function getStoredTheme() { try { return localStorage.getItem(THEME_STORAGE_KEY) || 'auto'; } catch (e) { return 'auto'; } }
            function storeTheme(t) { try { localStorage.setItem(THEME_STORAGE_KEY, t); } catch (e) { } }
            function applyTheme(t) {
                let actual = t === 'auto' ? (mediaQuery.matches ? 'dark' : 'light') : t;
                document.documentElement.classList.toggle('dark', actual === 'dark');
            }
            function updateThemeButton() {
                if (!themeToggle) return;
                themeToggle.title = `Theme: ${themeOptions[currentThemeIndex]} (t)`;
            }

            const storedTheme = getStoredTheme();
            currentThemeIndex = themeOptions.indexOf(storedTheme);
            if (currentThemeIndex === -1) currentThemeIndex = 0;
            applyTheme(storedTheme);
            updateThemeButton();
            mediaQuery.addEventListener('change', () => { if (themeOptions[currentThemeIndex] === 'auto') applyTheme('auto'); });
            if (themeToggle) themeToggle.addEventListener('click', () => {
                currentThemeIndex = (currentThemeIndex + 1) % 3;
                storeTheme(themeOptions[currentThemeIndex]);
                applyTheme(themeOptions[currentThemeIndex]);
                updateThemeButton();
            });

            // Breadcrumb
            function generateBreadcrumb() {
                const h1 = document.querySelector('h1');
                const bc = document.getElementById('fancyui-breadcrumb');
                if (!h1 || !bc) return;
                const path = h1.textContent.trim();
                document.title = `Index of ${path}`;
                const parts = path.split('/').filter(p => p);
                bc.innerHTML = '';
                const root = document.createElement('a'); root.href = '/'; root.textContent = 'root'; bc.appendChild(root);
                let cur = '/';
                parts.forEach((p, i) => {
                    const sep = document.createElement('span'); sep.className = 'fancyui-breadcrumb-sep'; sep.textContent = '/'; bc.appendChild(sep);
                    cur += p + '/';
                    if (i === parts.length - 1) {
                        const s = document.createElement('span'); s.className = 'fancyui-breadcrumb-current'; s.textContent = p; bc.appendChild(s);
                    } else {
                        const a = document.createElement('a'); a.href = cur; a.className = 'fancyui-breadcrumb-inactive'; a.textContent = p; bc.appendChild(a);
                    }
                });
                // Copy URL
                const btn = document.createElement('button'); btn.className = 'fancyui-copy-url-btn'; btn.innerHTML = '<i data-lucide="copy"></i>'; btn.title = 'Copy URL';
                btn.addEventListener('click', async () => {
                    try { await navigator.clipboard.writeText(location.href); btn.innerHTML = '<i data-lucide="check"></i>'; btn.classList.add('copied'); lucide.createIcons(); setTimeout(() => { btn.innerHTML = '<i data-lucide="copy"></i>'; btn.classList.remove('copied'); lucide.createIcons(); }, 2000); } catch (e) { }
                });
                bc.appendChild(btn);
                lucide.createIcons();
            }
            generateBreadcrumb();

            // Timestamp
            const ts = document.getElementById('fancyui-timestamp');
            if (ts) ts.textContent = `Generated: ${new Date().toISOString().slice(0, 19).replace('T', ' ')}`;

            // Icons
            const iconMap = { 'folder': 'folder', 'jpg': 'image', 'png': 'image', 'gif': 'image', 'svg': 'image', 'webp': 'image', 'mp4': 'video', 'mkv': 'video', 'avi': 'video', 'mp3': 'music', 'wav': 'music', 'flac': 'music', 'zip': 'archive', 'rar': 'archive', '7z': 'archive', 'tar': 'archive', 'gz': 'archive', 'js': 'file-code', 'ts': 'file-code', 'py': 'file-code', 'css': 'file-code', 'html': 'file-code', 'json': 'file-code', 'pdf': 'file-text', 'doc': 'file-text', 'txt': 'file-text', 'md': 'file-text' };
            const colorMap = { 'folder': 'fancyui-icon-folder', 'image': 'fancyui-icon-image', 'video': 'fancyui-icon-video', 'music': 'fancyui-icon-audio', 'archive': 'fancyui-icon-archive', 'file-code': 'fancyui-icon-code', 'file-text': 'fancyui-icon-document' };
            document.querySelectorAll('tbody tr').forEach(row => {
                const link = row.querySelector('td:first-child a'); if (!link || link.querySelector('i')) return;
                const href = link.getAttribute('href') || '', text = link.textContent.trim();
                if (href === '../') { const w = document.createElement('div'); w.className = 'fancyui-icon-parent'; w.innerHTML = '<i data-lucide="arrow-up-left"></i>'; link.insertBefore(w, link.firstChild); link.style.fontWeight = '600'; link.style.color = 'var(--color-accent)'; }
                else if (href.endsWith('/')) { const i = document.createElement('i'); i.setAttribute('data-lucide', 'folder'); i.className = 'fancyui-icon fancyui-icon-folder'; link.insertBefore(i, link.firstChild); }
                else { const ext = text.split('.').pop().toLowerCase(), icon = iconMap[ext] || 'file', color = colorMap[icon] || 'fancyui-icon-file'; const i = document.createElement('i'); i.setAttribute('data-lucide', icon); i.className = `fancyui-icon ${color}`; link.insertBefore(i, link.firstChild); }
            });
            lucide.createIcons();

            // Table
            const searchInput = document.getElementById('fancyui-search');
            const sortButtons = document.querySelectorAll('.fancyui-sort-btn');
            const pagCont = document.getElementById('fancyui-pagination');
            const table = document.querySelector('table'); if (!table) return;
            const tbody = table.querySelector('tbody');
            const allRows = Array.from(tbody.querySelectorAll('tr'));
            let parentRow = null;
            const fileRows = allRows.filter(r => { const l = r.querySelector('a'); const h = l ? l.getAttribute('href') : ''; if (h === '../') { parentRow = r; return false; } return true; });
            let filteredRows = [...fileRows], currentPage = 1;

            function renderPag() {
                if (!pagCont) return;
                const total = Math.ceil(filteredRows.length / ITEMS_PER_PAGE);
                pagCont.innerHTML = '';
                if (total <= 1) return;
                const info = document.createElement('span'); info.className = 'fancyui-pagination-info';
                const s = (currentPage - 1) * ITEMS_PER_PAGE + 1, e = Math.min(currentPage * ITEMS_PER_PAGE, filteredRows.length);
                info.textContent = `${s}-${e} of ${filteredRows.length}`; pagCont.appendChild(info);
                const btns = document.createElement('div'); btns.className = 'fancyui-pagination-buttons';
                const prev = document.createElement('button'); prev.innerHTML = '<i data-lucide="chevron-left"></i>'; prev.className = 'fancyui-pagination-btn'; prev.disabled = currentPage === 1; prev.onclick = () => { if (currentPage > 1) { currentPage--; renderPage(); } }; btns.appendChild(prev);
                for (let i = 1; i <= total; i++) { const b = document.createElement('button'); b.textContent = i; b.className = 'fancyui-pagination-btn'; if (i === currentPage) b.classList.add('active'); b.onclick = () => { currentPage = i; renderPage(); }; btns.appendChild(b); }
                const next = document.createElement('button'); next.innerHTML = '<i data-lucide="chevron-right"></i>'; next.className = 'fancyui-pagination-btn'; next.disabled = currentPage === total; next.onclick = () => { if (currentPage < total) { currentPage++; renderPage(); } }; btns.appendChild(next);
                pagCont.appendChild(btns); lucide.createIcons();
            }
            function renderPage() {
                fileRows.forEach(r => r.style.display = 'none');
                const s = (currentPage - 1) * ITEMS_PER_PAGE, e = s + ITEMS_PER_PAGE;
                filteredRows.slice(s, e).forEach(r => { if (!r.classList.contains('hidden')) r.style.display = ''; });
                renderPag();
            }

            // Search
            let searchTO;
            if (searchInput) searchInput.addEventListener('input', e => {
                clearTimeout(searchTO);
                searchTO = setTimeout(() => {
                    const q = e.target.value.toLowerCase().trim();
                    if (!q) { filteredRows = [...fileRows]; fileRows.forEach(r => r.classList.remove('hidden')); }
                    else { filteredRows = fileRows.filter(r => { const l = r.querySelector('a'); const t = l ? l.textContent.toLowerCase() : ''; const m = t.includes(q); r.classList.toggle('hidden', !m); return m; }); }
                    currentPage = 1; renderPage();
                }, 150);
            });

            // Sort
            let curSort = localStorage.getItem(SORT_STORAGE_KEY) || 'name', sortDir = parseInt(localStorage.getItem(SORT_DIR_STORAGE_KEY) || '1');
            function parseSize(s) { if (!s || s === '-') return -1; const m = s.trim().match(/^([\d.]+)\s*([KMGT]?i?B?)?$/i); if (!m) return 0; const v = parseFloat(m[1]), u = (m[2] || 'B').toUpperCase().replace('I', ''); const units = { 'B': 1, 'K': 1024, 'KB': 1024, 'M': 1048576, 'MB': 1048576, 'G': 1073741824, 'GB': 1073741824 }; return v * (units[u] || 1); }
            function parseDate(s) { if (!s || s === '-') return 0; return new Date(s).getTime() || 0; }
            function doSort(by, toggle = true) {
                if (toggle) { if (curSort === by) sortDir *= -1; else { curSort = by; sortDir = 1; } }
                localStorage.setItem(SORT_STORAGE_KEY, curSort); localStorage.setItem(SORT_DIR_STORAGE_KEY, sortDir.toString());
                sortButtons.forEach(b => b.classList.toggle('active', b.dataset.sort === curSort));
                const data = fileRows.map(r => { const c = r.querySelectorAll('td'), l = r.querySelector('a'); return { name: l ? l.textContent.toLowerCase() : '', isDir: l && l.getAttribute('href').endsWith('/'), date: c[1] ? parseDate(c[1].textContent) : 0, size: c[2] ? parseSize(c[2].textContent) : 0, el: r }; });
                data.sort((a, b) => { if (a.isDir !== b.isDir) return a.isDir ? -1 : 1; let c = 0; if (curSort === 'name') c = a.name.localeCompare(b.name); else if (curSort === 'date') c = a.date - b.date; else if (curSort === 'size') c = a.size - b.size; return c * sortDir; });
                if (parentRow) tbody.appendChild(parentRow);
                data.forEach(d => tbody.appendChild(d.el));
                filteredRows = data.filter(d => !d.el.classList.contains('hidden')).map(d => d.el);
                renderPage();
            }
            sortButtons.forEach(b => b.addEventListener('click', () => doSort(b.dataset.sort)));

            // Keyboard
            document.addEventListener('keydown', e => {
                const active = document.activeElement, typing = active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA');
                if ((e.key === '/' || ((e.ctrlKey || e.metaKey) && (e.key === 'k' || e.key === 'f'))) && !typing) { e.preventDefault(); searchInput?.focus(); searchInput?.select(); return; }
                if (e.key === 'Escape' && active === searchInput) { e.preventDefault(); searchInput.value = ''; searchInput.dispatchEvent(new Event('input')); searchInput.blur(); return; }
                if (e.key === 't' && !typing) { e.preventDefault(); themeToggle?.click(); }
            });

            doSort(curSort, false);
        })();
    </script>
</body>

</html>